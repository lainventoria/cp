<% obra = @contrato.obra.nil? ? @obra : @contrato.obra %>
<%= form_for([obra, @contrato]) do |f| %>
  <% if @contrato.errors.any? %>
  <% @editar = true %>
  <% end %>
  <%= f.error_messages %>

  <fieldset <%= editar_o_bloquear %>>

    <input type="hidden" name="obra_id" value="<%= obra.id %>"

    <div class="row">
      <div class="field form-group col-md-9">
        <%= f.hidden_field :tercero_id %>
        <%= f.label :tercero %><br>
        <%= autocomplete_field_tag 'contrato_de_venta[tercero_attributes[nombre]]', @contrato.tercero.try(:nombre), autocomplete_tercero_nombre_contratos_de_venta_path, { class: "form-control" } %>
      </div>
      <div class="field form-group col-md-3">
        <%= f.label '', 'CUIT' %><br>
        <%= autocomplete_field_tag 'contrato_de_venta[tercero_attributes[cuit]]', @contrato.tercero.try(:cuit), autocomplete_tercero_cuit_contratos_de_venta_path, { class: "form-control" } %>
      </div>
    </div>

    <div class="alert alert-info" id="contrato_de_venta_tercero_msg" style="display:none">
      <span></span>
      <button id="contrato_de_venta_tercero_clear" class="btn btn-sm btn-primary pull-right">Limpiar Selecci√≥n</button>
    </div>

    <div class="row">
      <div class="field form-group col-md-9">
        <%= f.label :unidad_funcional %><br>
        <%= f.collection_select(:unidades_funcionales, @obra.unidades_funcionales, :id, :nombre, { prompt: "-Seleccione Unidad-" }, { class: "form-control" } ) %>
      </div>
      <div class="field form-group col-md-3">
      <label> </label> <br>
      <button id="contrato_de_venta_unidad_funcional_agregar" class="btn btn-sm btn-primary pull-right">
        <span class="glyphicon glyphicon-plus"></span>
        Agregar
      </button>
      </div>
    </div>

  </fieldset>

<% end %>
